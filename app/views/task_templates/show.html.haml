- model_class = TaskTemplate
.page-header
  %h1=t '.title', :default => model_class.model_name.human.titleize

%p
  %strong= model_class.human_attribute_name(:label) + ':'
  %br
  = @task_template.label
%p
  %strong= model_class.human_attribute_name(:title_template) + ':'
  %br
  = @task_template.title_template
%p
  %strong= model_class.human_attribute_name(:form_template) + ':'
  %br
  = @task_template.form_template


= link_to t('.back', :default => t("helpers.links.back")), task_templates_path, :class => 'btn btn-default'
= link_to t('.edit', :default => t("helpers.links.edit")), edit_task_template_path(@task_template), :class => 'btn btn-default'
= link_to t('.destroy', :default => t("helpers.links.destroy")), task_template_path(@task_template), :method => "delete", :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-danger'

%hr

= render partial: 'task_form'
- unless @task_template.tasks.empty?
  - keys = @task_template.tasks.first.yaml_data.keys
  %table.table
    %thead
      %tr
        %th Title
        - keys.each do |key|
          %th= key
    %tbody
    - @task_template.tasks.each do |task|
      %tr
        %td=link_to task.render(@task_template.title_template), task_template_task_path(@task_template, task)
        - keys.each do |key|
          %td= task.yaml_data[key]
- else
  %div{class: "alert alert-danger", role: "alert"}
    No tasks have been uploaded.
